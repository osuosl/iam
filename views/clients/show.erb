<div class="container">
<h2> Client: <%= @client.name %>
<a href="/clients/<%= @client.id %>/edit"> Edit</a>
</h2>
<p>
    <b>Name:</b> <%= @client.contact_name %> <br>
    <b>Email:</b> <%= @client.contact_email %> <br>
    <b>Description:</b> <%= @client.description %> <br>
    <%= @client.active ? 'Active' : 'Inactive' %><br>
    <a href="/clients/<%= @client.id %>/billing"> <h4>Billing</h4> </a>
</p>

<% if @projects.empty? %>
  <p>
    <%= @client.name %> has no projects
  </p>
<% else %>
  <% if @client.name != 'default' %>
    <% @client_data.each do |project_name, array_hash| %>
      <% array_hash[0].each do |resource_type, resource_hash| %>
        <table class="table">
          <h4><%= resource_type == "db" ? "Database" : resource_type.capitalize %></h4>
          <thead>
          <% keys = resource_hash[0].values[0].keys %>
          <td>
            <tr>
              <th>Name</th>
              <% keys.each do |k| %>
                <% next if k == "id" %>
                <th>
                  <% if k == "DBSize" %>
                    Database
                  <% elsif k == "VCPUCount" %>
                    CPU Count
                  <% else %>
                    <%= k.underscore.humanize.titleize %>
                  <% end %>
                </th>
              <% end %>
            </tr>
          </td>
        </thead>
        <tbody>
          <% resource_hash[0].each do |resource_name, resource_values| %>
          <tr>
            <td>
              <%= resource_name %>
            </td>
            <% resource_values.each do |key, value| %>
              <td>
                <%= value unless key == "id" %>
              </td>
            <% end #resource_values%>
        </tr>
          <% end #resource_hash %>
        </tbody>
        </table>
      <% end #array_hash%>
    <% end #client_data%>
  <% end #if default%>
<% end %>
</div>
