<div class="container">
<h2> Client: <%= @client.name %>
<a href="/clients/<%= @client.id %>/edit">edit</a>
</h2>
<p>
    Name: <%= @client.contact_name %> <br>
    Email: <%= @client.contact_email %> <br>
    Description: <%= @client.description %> <br>
    <%= @client.active ? 'Active' : 'Inactive' %><br>
    <a href="/clients/<%= @client.id %>/billing"> <h4>Billing</h4> </a>
</p>
<% if @projects.empty? %>
  <p>
    <%= @client.name %> has no projects
  </p>
<% else %>
  <% if @client.name != 'default' %>
    <% Report.plugin_matrix.each do |resource_type, resource_measurements| %>
      <table class="table">
        <thead>
          <h4><%= resource_type.capitalize%></h4>
          <th>Name</th>
          <th>Project</th>
          <%resource_measurements.each do |header| %>
            <th><%= header %></th>
          <% end %>
        </thead>
        <tbody>
          <% @client_data.each do |project_id, project_resource|%>
            <% project_resource[resource_type].each do |name, res_hash|%>
              <tr>
                <% res_hash.each do |key, value| %>
                  <% if key == :id %>
                    <td>
                      <a href="/<%= resource_type %>/<%=value%>"><%= name %></a>
                    </td>
                    <td>
                      <a href="/projects/<%= project_id %>">
                        <%= (@projects.detect {|project| project[:id] == project_id })[:name] %>
                      </a>
                    </td>
                  <% elsif key != :drdb %>
                    <td>
                      <%= value %>
                    </td>
                  <% end %>
                <% end %>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    <% end %>
  <% end %>
<% end %>
</div>
